@inject IJSRuntime JSRuntime;

<StandaloneCodeEditor Id="main-editor" ConstructionOptions="EditorConstructionOptions" @ref="Content" />

<style>
	.monaco-editor-container {
		height: 100%;
		width: 100%;
		border: none;
	}
</style>

@code {
	public StandaloneCodeEditor Content;

	protected override async Task OnParametersSetAsync()
	{
		await MonacoInterop.Setup.RegisterAozoraOnDemand(JSRuntime);
		await base.OnParametersSetAsync();
	}

	//protected override async Task OnInitializedAsync()
	//{
	//	await MonacoInterop.Setup.RegisterAozoraOnDemand(JSRuntime);
	//	await base.OnInitializedAsync();
	//}

	private StandaloneEditorConstructionOptions EditorConstructionOptions(StandaloneCodeEditor editor)
	{
		return new StandaloneEditorConstructionOptions
			{
				AutomaticLayout = true,
				Language = "aozora",
				Value = "テスト",
				//テーマはこの後変更されるので設定しません。
				Folding = true,
				Suggest = new SuggestOptions()
				{
					SnippetsPreventQuickSuggestions = false,
				},
				UnicodeHighlight = new UnicodeHighlightOptions()
				{
					AmbiguousCharacters = false
				}
			};
	}
}
