@implements IMenuParent
@inject IJSRuntime JSRuntime;

<CascadingValue Value="this">
	@ChildContent
</CascadingValue>

@code {
	[Parameter]
	public RenderFragment? ChildContent { get; set; }

	public int ZIndex => 256;

	System.Collections.ObjectModel.ObservableCollection<IMenuItem> ChildMenus { get; } = new();

	public void AddItem(IMenuItem menuItem)
	{
		ChildMenus.Add(menuItem);
		StateHasChanged();
	}

	public void Hide()
	{
		foreach (var item in ChildMenus)
		{
			item.Hide();
		}
		StateHasChanged();
	}

	public ElementReference? ElementBox { get; set; }

	public MenuPosition ChildPosition => MenuPosition.ClickedPositionBottomRight;

	//[Parameter]
	//public double ClickedPositionX { get; set; }

	//[Parameter]
	//public double ClickedPositionY { get; set; }

	public void NotifyStateHasChanged() => StateHasChanged();
}
