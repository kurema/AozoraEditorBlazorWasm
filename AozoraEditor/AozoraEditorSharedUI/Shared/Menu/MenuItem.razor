@implements IMenuParent
@implements IMenuItem

<CascadingValue Value="this">
	@ChildContent
</CascadingValue>

@code {
	[CascadingParameter]
	private IMenuParent? Parent { get; set; }

	[Parameter]
	public RenderFragment? ChildContent { get; set; }

	[Parameter]
	public string Title { get; set; } = string.Empty;

	System.Collections.ObjectModel.ObservableCollection<IMenuItem> ChildMenus { get; } = new();

	public void AddPage(IMenuItem menuItem)
	{
		ChildMenus.Add(menuItem);
		StateHasChanged();
	}

	public bool HasChild => ChildMenus.Any();

	protected override void OnInitialized()
	{
		if (Parent is null) throw new ArgumentNullException(nameof(Parent), "MenuItem requires the parent.");
		Parent.AddPage(this);
		base.OnInitialized();
	}

	public Task InvokeAsync()
	{
		return Task.CompletedTask;
	}
}
